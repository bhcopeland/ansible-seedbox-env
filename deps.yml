---

- name: install apt packages
  apt: pkg={{item}} update_cache=yes
  with_items:
    - python3-pip
    - software-properties-common
    - fuse
    - zsh

- name: add key
  apt_key:
    keyserver: keys.gnupg.net
    id: 11E9DE8848F2B65222AA75B8D1820DB22A11534E

- name: add ppas
  apt_repository:
    repo: "{{item}}"
  with_items:
    - "ppa:jon-hedgerows/get-iplayer"
    - "deb https://weechat.org/ubuntu xenial main"

- name: install ppa pkgs
  apt: pkg={{item}} update_cache=yes
  with_items:
    - get-iplayer
    - weechat

- name: Install virtualenv via pip
  pip:
    name: virtualenv
    executable: pip3

- name: Cloning oh-my-zsh
  git:
    repo: https://github.com/robbyrussell/oh-my-zsh
    dest: "/home/{{username}}/.oh-my-zsh"

- name: Copy zshrc config
  template:
    src: "{{playbook_dir}}/templates/zshrc"
    dest: "/home/{{username}}/.zshrc"
    owner: "{{username}}"
    force: yes
